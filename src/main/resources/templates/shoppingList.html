<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org">

<div th:insert="~{index.html :: head}"></div>

<body>
    
    <!--  Header  -->
    <div th:insert="~{index.html :: header}"></div>

    <!--  Navbar  -->
    <div th:insert="~{index.html :: navbar}"></div>


    <!-- Shopping List -->
    <div class="container my-5 px-auto border-2">
        <!-- 
        <table class="table table-hover mx-auto px-auto">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Type</th>
                    <th scope="col">Size</th>
                    <th scope="col">No Units</th>
                    <th scope="col">Del</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${products}"
                    th:sort="${product.getId()}">
                    
                    <td class="border-1 text-center">
                        <span th:text="${product.getName}"></span>
                    </td>
                    <td class="border-1 text-center">
                        <span th:text="${product.getType}"></span>
                    </td>
                    <td class="border-1 text-center">
                        <span th:text="${product.getSizeOfUnit}"></span>
                    </td>
                    <td class="border-1 text-center">
                        <span th:text="${product.getNumOfUnits}"></span>
                    </td>
                    <td class="border-1 text-center">
                        <a type="button" class="col btn btn-primary btn-sm btn-block
                            p-auto m-1"
                            th:href="@{/deleteProduct/{id}(id=${product.getId()})}">
                            Del
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
        -->

        <div class="container mx-0 px-5">
            <div class="row mx-0 px-0">
                <div class="col-sm-6 col-md-3 col-lg-2 px-1 mx-0" th:each="product : ${products}"
                     th:sort="${product.getId()}">
                    <div class="row product-tile px-0">
                        <div class="col-9 mx-0 px-1" data-container="body"
                            data-toggle="popover" data-placement="top"
                            data-content="Test">
                            <span class="mx-auto p-auto d-inline-block text-decoration-none text-truncate"
                                style="max-width: 100%;"
                                th:text="${product.getName} + ' ' 
                                    + ${product.getType} + ' ' 
                                    + ${product.getSizeOfUnit}">
                            </span>
                        </div>
                        <a class="col-2 mx-auto del-product-btn
                                d-flex justify-content-center align-items-center"
                                th:href="@{/deleteProduct/{id}(id=${product.getId()})}">
                            <i class="bi bi-trash3"></i>
                            
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add new product to list -->
        <div class="container row my-2 mx-auto p-2 mb-3">
            <div class="col-6 offset-3 px-auto" >
                <!--/*@thymesVar id="product" type="com.springShoppingBot.SpringShoppingBot.product.Product"*/-->
                <form th:action="@{/product/addNewProduct}" th:object="${product}" th:method="post"
                    class="row">
                    <legend class="col-12 text-center">Add product to list</legend>
                    <fieldset class="col-12 px-0 form-group" required>
                        <label class="form-label" for="name">Name *</label>
                        <input class="form-field" id="name" type="text" name="name">
                    </fieldset>
                    <fieldset class="col-12 px-0 form-group">
                        <label class="form-label" for="type">Type</label>
                        <input class="form-field" id="type" type="text" name="type">
                    </fieldset>
                    <fieldset class="col-12 px-0 form-group">
                        <label class="form-label" for="sizeOfUnit">Size</label>
                        <input class="form-field" id="sizeOfUnit" type="text" name="sizeOfUnit">
                    </fieldset>
                    <fieldset class="col-12 px-0 form-group" required>
                        <label class="form-label" for="numOfUnits">Quantity *</label>
                        <input class="form-field" id="numOfUnits" type="text" name="numOfUnits">
                    </fieldset>
                    <span class="col-12 blockquote fst-italic"
                        style="font-size: 12px; text-align: right;">
                        * Required fields
                    </span>
                    <!-- Add product to the Order button-->
                    <button class="col-md-6 offset-md-3
                        btn btn-lg btn-success mx-auto" type="submit">
                        Add
                    </button>
                </form>
                
                <!-- Submit the order button-->
                <div class="row">
                    <button class="col-md-6 offset-md-3 my-3
                        btn btn-lg btn-warning mx-auto"
                        data-bs-toggle="modal" data-bs-target="#submitOrderModal"
                        data-bs-whatever="@mdo">
                        Submit
                    </button>

                    <!-- Submit the order modal-->
                    <div class="modal fade" id="submitOrderModal" tabindex="-1"
                            aria-labelledby="submitModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Enter your email</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!--/*@thymesVar id="order" type="com.springShoppingBot.SpringShoppingBot.order.Order"*/-->
                                <form th:action="@{/orderSummary}"
                                        th:object="${order}" th:method="post">
                                    <div class="mb-3">
                                        <!-- Gdzieś w moich notatkach z poprzedniego projektu
                                            miałem coś o tym jak łatwo przesyłać wartości z frontu
                                            do backendu za pomocą @RequestParam-->
                                        <label for="user-email" class="col-form-label">Email:</label>
                                        <input type="text" class="form-control" id="user-email"
                                                required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="message-text" class="col-form-label">Message:</label>
                                        <textarea class="form-control" id="message-text"></textarea>
                                    </div>
                                    <button class="btn btn-primary" type="submit">Submit Order</button>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                     Return
                                </button>
                                <button class="btn btn-primary" type="submit">Submit Order</button>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 
            <script>
                $(function () {
                    $('.example-popover').popover({
                        container: 'body'
                    })
                })
            </script>
        -->
    </div>

</body>
</html>